## Разработка приложения для управления студентами и курсами (Avalonia, MVVM, SQLite)

В ходе этой работы вам нужно будет создать оконное приложение на Avalonia с двумя страницами (студенты и курсы), где данные синхронизируются между интерфейсом и базой данных. Приложение должно работать по паттерну MVVM и использовать EF Core для взаимодействия с SQLite.

---

### **Полное описание задачи**

#### **Страница "Студенты"**

1. **Верхняя панель**:
   - Поле для ввода имени студента.
   - Кнопка выбора фото (сохранение в папку `Images`, отображение миниатюры).
   - Выпадающий список с мультивыбором курсов (берётся из страницы "Курсы").
   - Кнопка "Добавить" для создания новой записи.
2. **Список студентов**:
   - Прокручиваемый блок с карточками студентов.
   - Каждая карточка содержит:
     - Фото студента.
     - Имя (нередактируемое, если не в режиме правки).
     - Список курсов.
     - Кнопки "Изменить" (переключает в режим редактирования) и "Удалить".
3. **Режим редактирования**:
   - Вместо фото — поле для выбора нового файла.
   - Имя и курсы можно изменять.
   - Кнопка "Сохранить" обновляет запись в БД.

#### **Страница "Курсы"**

1. **Верхняя панель**:
   - Поля для названия и описания курса.
   - Кнопка "Добавить".
2. **Список курсов**:
   - Прокручиваемый блок с карточками курсов.
   - Каждая карточка содержит название, описание, кнопки "Изменить" и "Удалить".

#### **Общие требования**

- Переключение между страницами через верхнее меню.
- При добавлении курса он сразу становится доступным у студентов.
- При удалении курса он исчезает у всех студентов.
- При изменении названия курса оно обновляется у всех студентов.
- Фото сохраняются в папку `Images`, пути хранятся в БД.
- Использовать EF Core для работы с SQLite.
- Приложение должно быть построено по паттерну MVVM.
- Код должен быть выложен на репозитории в GitHub.

---

### **Этапы выполнения**

**Важно**: Этапы выполняются последовательно. Каждый завершённый этап добавляет баллы. Начинайте с базовой функциональности, постепенно усложняя задачу.

---

#### **Этап 1 (10 баллов): Базовая реализация без БД и фото**

**Цель**: Создать интерфейс и логику добавления/удаления записей.  
**Что нужно сделать**:

1. **Страница студентов**:
   - Реализовать ввод имени и выбор курсов.
   - Выводить список добавленных студентов (имя + курсы).
   - Кнопка "Удалить" удаляет запись из списка.
2. **Страница курсов**:
   - Добавлять курсы через поля ввода.
   - Выводить список курсов.
   - Удаление курсов.

**Подсказки**:

- Для страниц используйте `UserControl`. Переключение между ними можно организовать через `ContentControl` и `DataTemplates`.
- Для списков студентов и курсов примените `ItemsControl` или `ListBox` с `ItemTemplate`.
- Храните данные в `ObservableCollection<T>` (например, `Students` и `Courses` в ViewModel), чтобы изменения автоматически отображались в интерфейсе.
- Для выпадающего списка с мультивыбором используйте `ListBox` с `SelectionMode="Multiple"`.

---

#### **Этап 2 (10 баллов): Редактирование записей**

**Цель**: Добавить возможность редактирования существующих записей.  
**Что нужно сделать**:

- При нажатии "Изменить" в карточке студента/курса:
  - Активировать поля для редактирования.
  - Заменить кнопку "Изменить" на "Сохранить".
- После сохранения обновить данные в списке.

**Подсказки**:

- Добавьте в модели свойство `IsEditing` (например, в `StudentViewModel`).
- Используйте `DataTrigger` в XAML для изменения видимости элементов (например, скрыть фото и показать поле выбора файла в режиме редактирования).
- Для текстовых полей используйте привязку с режимом `TwoWay`:
  ```xml
  <TextBox Text="{Binding Name, Mode=TwoWay}" IsEnabled="{Binding IsEditing}" />
  ```

---

#### **Этап 3 (10 баллов): Работа с фотографиями**

**Цель**: Реализовать загрузку, отображение и обновление фото.  
**Что нужно сделать**:

- Добавить кнопку выбора файла для загрузки фото.
- Сохранять фото в папку `Images` (относительный путь, например: `Images/student_1.jpg`).
- Отображать фото в списке студентов.

**Подсказки**:

- Для выбора файла используйте `OpenFileDialog`.
- Создайте папку `Images` вручную или программно при запуске приложения.
- В модели студента храните путь к фото (`string PhotoPath`).
- Для отображения фото используйте контрол `Image`:
  ```xml
  <Image Source="{Binding PhotoPath}" Width="100" Height="100" />
  ```

---

#### **Этап 4 (10 баллов): Интеграция с SQLite и EF Core**

**Цель**: Настроить базу данных и сохранять данные между сеансами.  
**Что нужно сделать**:

1. Создать модели для БД.
2. Настроить контекст данных.
3. При добавлении/удалении/изменении записей сохранять изменения в БД.

**Подсказки**:

- Вынесите работу с БД в отдельный сервис (например, `DatabaseService`).
- Для связи многие-ко-многим добавьте навигационные свойства в модели и настройте их в `OnModelCreating`.
- При удалении курса каскадно обновите студентов:
  ```csharp
  protected override void OnModelCreating(ModelBuilder modelBuilder)
  {
      modelBuilder.Entity<Student>()
          .HasMany(s => s.Courses)
          .WithMany(c => c.Students);
  }
  ```

---
